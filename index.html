<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°•ìŠ¤ ì ì¬ëŸ‰ ë¹„êµ ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background-color: #f1f5f9; /* Slate 100 */
        }
        .container {
            max-width: 1000px;
        }
        input[type="number"], input[type="text"] {
            transition: all 0.2s;
        }
        input[type="number"]:focus, input[type="text"]:focus {
            border-color: #3b82f6; /* Blue 500 */
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        .scroll-container {
            overflow-x: auto;
        }
        table {
            min-width: 900px;
            /* Enhance table design */
            border-collapse: collapse;
        }
        th, td {
            white-space: nowrap;
            border: 1px solid #e5e7eb; /* Light gray border */
        }
        /* Hide element only on print */
        .print-hide {
            display: inherit;
        }
        
        /* Mobile optimization */
        @media (max-width: 768px) {
            .input-group, .car-input-group {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            .input-item input, .car-input-item input {
                width: 100%;
            }
            .car-input-group button {
                width: 100%;
                margin-top: 10px;
            }
            .scroll-container {
                margin: 0 -1rem;
                padding: 0 1rem;
            }
        }

        /* --- Print Styles for Clean Output --- */
        @media print {
            body {
                background-color: #ffffff !important;
                padding: 0;
                margin: 0;
            }
            .container {
                box-shadow: none !important;
                padding: 0;
                margin: 0 auto;
                width: 100%;
                max-width: 100%;
            }
            /* Hide all interactive/non-data sections, graph, and notice */
            .print-hide, 
            .input-group, 
            .car-input-group, 
            #chartCanvas, 
            .bg-blue-50, 
            .bg-green-50, 
            .bg-yellow-50, 
            .shadow-2xl, 
            .shadow-inner, 
            .mb-8,
            h2:nth-of-type(4) /* ê·¸ë˜í”„ ì œëª© ìˆ¨ê¹€ */
            {
                display: none !important;
            }
            
            /* Ensure the main table is the focus */
            #car_spec_table {
                min-width: auto;
                width: 100%;
                margin: 20px 0;
                border-collapse: collapse;
            }

            /* Monochrome and clear table borders for print */
            th, td {
                border: 1px solid #444 !important;
                padding: 8px !important;
                white-space: normal !important;
                color: #000 !important;
            }
            thead {
                background-color: #eee !important;
                -webkit-print-color-adjust: exact; /* For background colors to print */
                color: #000 !important;
            }

            /* Hide the 'ê´€ë¦¬' (Delete Button) column */
            #car_spec_table th:nth-child(7), 
            #car_spec_table td:nth-child(7) {
                display: none !important;
            }
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="container mx-auto bg-white p-6 md:p-10 rounded-xl shadow-2xl">
        <div class="flex justify-between items-center mb-6 border-b pb-3">
            <h1 class="text-3xl font-extrabold text-gray-900">ì°¨ëŸ‰ ì ì¬ íš¨ìœ¨ ì‹œë®¬ë ˆì´í„°</h1>
            <button onclick="window.print()" class="print-hide bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-colors text-sm">
                ê²°ê³¼ ì¸ì‡„ (Print)
            </button>
        </div>
        
        <!-- ë°•ìŠ¤ í¬ê¸° ì…ë ¥ -->
        <h2 class="text-xl font-bold text-gray-700 mb-4 pt-4 print-hide">ğŸ“¦ ë°•ìŠ¤ í¬ê¸° ì…ë ¥ (mm)</h2>
        <div class="input-group flex flex-wrap md:flex-nowrap gap-4 mb-8 p-4 bg-blue-50 rounded-lg border border-blue-100 print-hide">
            <div class="input-item flex flex-col w-full">
                <label for="box_width" class="font-medium text-gray-600 mb-1">ê°€ë¡œ (W)</label>
                <input type="number" id="box_width" value="480" min="1" onchange="calculateCapacity()" class="p-2 border border-gray-300 rounded-md">
            </div>
            <div class="input-item flex flex-col w-full">
                <label for="box_length" class="font-medium text-gray-600 mb-1">ì„¸ë¡œ (L)</label>
                <input type="number" id="box_length" value="380" min="1" onchange="calculateCapacity()" class="p-2 border border-gray-300 rounded-md">
            </div>
            <div class="input-item flex flex-col w-full">
                <label for="box_height" class="font-medium text-gray-600 mb-1">ë†’ì´ (H)</label>
                <input type="number" id="box_height" value="340" min="1" onchange="calculateCapacity()" class="p-2 border border-gray-300 rounded-md">
            </div>
        </div>

        <!-- ì°¨ëŸ‰ ì œì› ë°ì´í„° ì…ë ¥ (ë¶„ë¦¬ëœ í•„ë“œ) -->
        <h2 class="text-xl font-bold text-gray-700 mb-4 pt-4 border-t mt-6 print-hide">ğŸšš ìƒˆë¡œìš´ ì°¨ëŸ‰ ì œì› ì¶”ê°€ (mm)</h2>
        <div class="car-input-group flex flex-wrap gap-4 mb-8 p-4 bg-green-50 rounded-lg border border-green-100 print-hide">
            <div class="car-input-item flex flex-col flex-1 min-w-[150px]">
                <label for="new_car_name" class="font-medium text-gray-600 mb-1">ëª¨ë¸ëª…</label>
                <input type="text" id="new_car_name" placeholder="ì˜ˆ: íŠ¹ìˆ˜ì°¨ëŸ‰ 3í˜¸" class="p-2 border border-gray-300 rounded-md">
            </div>
            <div class="car-input-item flex flex-col flex-1 min-w-[80px]">
                <label for="new_car_w" class="font-medium text-gray-600 mb-1">ë„ˆë¹„ (W)</label>
                <input type="number" id="new_car_w" placeholder="W" class="p-2 border border-gray-300 rounded-md">
            </div>
            <div class="car-input-item flex flex-col flex-1 min-w-[80px]">
                <label for="new_car_l" class="font-medium text-gray-600 mb-1">ê¸¸ì´ (L)</label>
                <input type="number" id="new_car_l" placeholder="L" class="p-2 border border-gray-300 rounded-md">
            </div>
            <div class="car-input-item flex flex-col flex-1 min-w-[80px]">
                <label for="new_car_h" class="font-medium text-gray-600 mb-1">ë†’ì´ (H)</label>
                <input type="number" id="new_car_h" placeholder="H" class="p-2 border border-gray-300 rounded-md">
            </div>
            <button onclick="addCarSpec()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg self-end shadow-md transition-colors w-full md:w-auto">
                ì°¨ëŸ‰ ì¶”ê°€
            </button>
        </div>

        <!-- ì„íŒ©íŠ¸ ë¬¸êµ¬ ë° ê³ ì§€ ì‚¬í•­ -->
        <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 rounded-lg shadow-inner mt-4 mb-6 print-hide">
            <p class="font-bold text-lg mb-1">âš ï¸ ì¤‘ìš” ê³ ì§€ ì‚¬í•­ ë° ì°¨ëŸ‰ íŠ¹ì„±</p>
            <ul class="list-disc list-inside text-sm space-y-1">
                <li>**AI íœ´ë¦¬ìŠ¤í‹± ì•Œê³ ë¦¬ì¦˜**ì„ í†µí•´ ì ì¬ë¬¼ ê³„ì‚°ì„ í•œ ê²ƒì´ë¯€ë¡œ, ì‹¤ì œ ì ì¬ í™˜ê²½ì´ë‚˜ ë°©ë²•(ì˜ˆ: ë¹„ì •í˜• êµ¬ì¡°)ì— ë”°ë¼ ì ì¬ëŸ‰ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²°ê³¼ëŠ” **ì°¸ê³ ìš©**ìœ¼ë¡œë§Œ í™œìš©í•´ ì£¼ì‹­ì‹œì˜¤.</li>
                <li>**ìƒìŠ¹íƒ‘ ëª¨ë¸**ì€ ìƒë¶€ ë¶€ë¶„ì´ ë” ë„“ì€ ë¹„ì •í˜• êµ¬ì¡°ì´ë¯€ë¡œ, í‘œê¸°ëœ W x L x H ë‹¨ìˆœ ê³„ì‚° ë¶€í”¼ë³´ë‹¤ **ì‹¤ì œ ì ì¬ ê°€ëŠ¥ ë¶€í”¼ê°€ ë” í½ë‹ˆë‹¤.** (í‘œì—ì„œëŠ” W x L x H ë‹¨ìˆœ ê³„ì‚° ë¶€í”¼ë¥¼ ì‚¬ìš©)</li>
                <li>**ë¶€í”¼ ì°¨ì´ (vs ë°”ë¡œ ì•„ë˜ ì°¨ëŸ‰)**ëŠ” **ë°”ë¡œ ì•„ë˜ í–‰ì˜ ì°¨ëŸ‰ ë¶€í”¼ë¥¼ ê¸°ì¤€**ìœ¼ë¡œ í˜„ì¬ ì°¨ëŸ‰ì˜ ë¶€í”¼ê°€ ì–¼ë§ˆë‚˜ í°ì§€ë¥¼ %ë¡œ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</li>
            </ul>
        </div>
        
        <!-- ì°¨ëŸ‰ ì œì› ë°ì´í„° í…Œì´ë¸” -->
        <h2 class="text-xl font-bold text-gray-700 mb-4 pt-4 border-t mt-6">ğŸ“Š ì°¨ëŸ‰ë³„ ì ì¬ ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼</h2>
        <div class="scroll-container">
            <table id="car_spec_table" class="min-w-full divide-y divide-gray-200 shadow-md rounded-lg overflow-hidden">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider text-left">ì°¨ëŸ‰ ëª¨ë¸ëª…</th>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">í¬ê¸° (W x L x H, mm)</th>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">ë¶€í”¼ ($m^3$)</th>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">ì ì¬ìœ¨ (%)</th>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">ë¶€í”¼ ì°¨ì´ (vs ë°”ë¡œ ì•„ë˜ ì°¨ëŸ‰)</th>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider">ìµœëŒ€ ì ì¬ ë°•ìŠ¤ ìˆ˜</th>
                        <th class="px-3 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider print-hide">ê´€ë¦¬</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                    <!-- ë°ì´í„°ëŠ” JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                </tbody>
            </table>
        </div>

        <!-- ê·¸ë˜í”„ ì˜ì—­ -->
        <h2 class="text-xl font-bold text-gray-700 mb-4 pt-8 border-t mt-8 print-hide">ğŸ“ˆ ì ì¬ëŸ‰ ë¹„êµ ê·¸ë˜í”„</h2>
        <div class="flex justify-center p-4 bg-gray-50 rounded-lg shadow-inner print-hide">
            <canvas id="chartCanvas" width="900" height="400" class="w-full h-auto"></canvas>
        </div>
    </div>

<script>
    // 1. ì´ˆê¸° ì°¨ëŸ‰ ì œì› ë°ì´í„° (W: ë„ˆë¹„, L: ê¸¸ì´, H: ë†’ì´, ìˆœì„œ: W x L x H)
    // ëª¨ë“  ì°¨ëŸ‰ì€ ëª…ì‹œëœ ì œì›(W x L x H)ì„ ê¸°ì¤€ìœ¼ë¡œ ë¶€í”¼ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
    let carSpecs = [
        // ë„ˆë¹„(W) x ê¸¸ì´(L) x ë†’ì´(H) ìˆœì„œë¡œ êµ¬ì„± (ë¶€í”¼ê°€ í° ì°¨ëŸ‰ë¶€í„° ë°°ì¹˜í•˜ì—¬ ë³´ê¸° ì‰½ë„ë¡ í•¨)
        { name: "ì¶•ì—°ì¥ ìƒìŠ¹íƒ‘ ìŠˆí¼", spec: "1600 x 3400 x 2200" },
        { name: "ì¶•ì—°ì¥ ìƒìŠ¹íƒ‘ ê¸°ë³¸", spec: "1600 x 3400 x 1800" },
        { name: "ìƒìŠ¹íƒ‘ ìŠˆí¼", spec: "1645 x 2870 x 2200" },
        { name: "ìƒìŠ¹íƒ‘ ê¸°ë³¸", spec: "1645 x 2770 x 1800" },
        { name: "í•˜ì´íƒ‘ì°¨", spec: "1670 x 2830 x 1800" },
        { name: "ì¼ë°˜íƒ‘ì°¨", spec: "1670 x 2830 x 1580" },
        { name: "ì €ìƒíƒ‘ì°¨", spec: "1670 x 2830 x 1270" }
    ];

    // 2. ì ì¬ëŸ‰ ê³„ì‚° (íœ´ë¦¬ìŠ¤í‹± ì•Œê³ ë¦¬ì¦˜ - 6ê°€ì§€ íšŒì „ ì¡°í•© ë¹„êµ)
    function calculateMaxBoxes(carW, carL, carH, boxW, boxL, boxH) {
        if (boxW <= 0 || boxL <= 0 || boxH <= 0) return 0;
        
        let maxCount = 0;

        // 6ê°€ì§€ ëª¨ë“  íšŒì „ ì¡°í•© (ìˆœì—´)ì„ ê³ ë ¤í•©ë‹ˆë‹¤.
        const permutations = [
            [boxW, boxL, boxH], [boxW, boxH, boxL],
            [boxL, boxW, boxH], [boxL, boxH, boxW],
            [boxH, boxW, boxL], [boxH, boxL, boxW]
        ];

        for (const [w, l, h] of permutations) {
            // ê° ì¶•ì— ëª‡ ê°œì”© ë“¤ì–´ê°€ëŠ”ì§€ ê³„ì‚° (ì •ìˆ˜ë§Œ í—ˆìš©)
            const countW = Math.floor(carW / w);
            const countL = Math.floor(carL / l);
            const countH = Math.floor(carH / h);
            
            // ì´ ì ì¬ ê°œìˆ˜
            const totalCount = countW * countL * countH;
            
            // ìµœëŒ€ê°’ ê°±ì‹ 
            if (totalCount > maxCount) {
                maxCount = totalCount;
            }
        }
        
        return maxCount;
    }

    // 3. ì°¨ëŸ‰ ì œì› í…Œì´ë¸” ì—…ë°ì´íŠ¸ ë° ì ì¬ëŸ‰ ê³„ì‚° í•µì‹¬ ë¡œì§
    function updateCarTable() {
        const boxW = parseInt(document.getElementById('box_width').value);
        const boxL = parseInt(document.getElementById('box_length').value);
        const boxH = parseInt(document.getElementById('box_height').value);

        if (isNaN(boxW) || isNaN(boxL) || isNaN(boxH) || boxW <= 0 || boxL <= 0 || boxH <= 0) {
            document.getElementById('car_spec_table').getElementsByTagName('tbody')[0].innerHTML = '<tr><td colspan="7" class="text-center py-4 text-red-500">ìœ íš¨í•œ ë°•ìŠ¤ í¬ê¸°ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</td></tr>';
            drawBarChart([]);
            return;
        }

        const boxVolume = (boxW * boxL * boxH) / 1000000000; // ë°•ìŠ¤ ë¶€í”¼ (m^3)

        const tbody = document.getElementById('car_spec_table').getElementsByTagName('tbody')[0];
        tbody.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
        
        
        // --- Step 1: ëª¨ë“  ì°¨ëŸ‰ì˜ ë°ì´í„°(ë¶€í”¼ í¬í•¨)ë¥¼ ë¯¸ë¦¬ ê³„ì‚° (Original Order) ---
        const calculatedData = carSpecs.map((car, originalIndex) => { 
            
            // STANDARD CUBIC VOLUME CALCULATION (ëª¨ë“  ì°¨ëŸ‰ì— ì ìš©)
            const parts = car.spec.split('x').map(s => parseInt(s.trim()));
            // W, L, H ìˆœì„œ
            const [carW, carL, carH] = parts; 
            const carVolume = (carW * carL * carH) / 1000000000;

            const maxBoxes = calculateMaxBoxes(carW, carL, carH, boxW, boxL, boxH);
            const utilizedVolume = maxBoxes * boxVolume;
            const volumeRatio = carVolume > 0 ? (utilizedVolume / carVolume) * 100 : 0;
            
            return {
                ...car,
                originalIndex, 
                carVolume,
                maxBoxes,
                volumeRatio,
                displaySpec: car.spec // í‘œì‹œìš© ìŠ¤í™
            };
        });

        const dataForDisplay = calculatedData;
        let chartData = []; 

        // --- Step 2: ë°ì´í„°ë¥¼ ì›ë³¸ ìˆœì„œëŒ€ë¡œ ë°˜ë³µí•˜ë©° í…Œì´ë¸” í–‰ ìƒì„± ë° ë¶€í”¼ ì°¨ì´ ê³„ì‚° ---
        // ë¶€í”¼ ì°¨ì´ ê¸°ì¤€: í˜„ì¬ ì°¨ëŸ‰ vs ë°”ë¡œ ì•„ë˜ ì°¨ëŸ‰
        dataForDisplay.forEach((car, index) => {

            let volumeDiffText = 'N/A';
            let diffColorClass = 'text-gray-500';

            // ë‹¤ìŒ ì°¨ëŸ‰ì„ ë¹„êµ ê¸°ì¤€ìœ¼ë¡œ ì¡ìŠµë‹ˆë‹¤. (ë°°ì—´ ìˆœì„œëŒ€ë¡œ)
            const comparisonCar = dataForDisplay[index + 1];
            
            if (!comparisonCar) {
                // ë°°ì—´ì˜ ë§ˆì§€ë§‰ ì°¨ëŸ‰ (ë¹„êµ ëŒ€ìƒ ì—†ìŒ)
                volumeDiffText = 'ê¸°ì¤€ (0.0%)';
                diffColorClass = 'text-blue-600 font-bold';
            } else {
                const baseVolume = comparisonCar.carVolume;
                
                if (baseVolume > 0) {
                    // (í˜„ì¬ ì°¨ëŸ‰ ë¶€í”¼ - ë‹¤ìŒ ì°¨ëŸ‰ ë¶€í”¼) / ë‹¤ìŒ ì°¨ëŸ‰ ë¶€í”¼ * 100
                    // ë°”ë¡œ ì•„ë˜ ì°¨ëŸ‰ì˜ ë¶€í”¼ë¥¼ ê¸°ì¤€(ë¶„ëª¨)ìœ¼ë¡œ ê³„ì‚°í•©ë‹ˆë‹¤.
                    const volumeDiffValue = ((car.carVolume - baseVolume) / baseVolume) * 100;
                    
                    volumeDiffText = `${volumeDiffValue.toFixed(1)}%`;
                    
                    if (volumeDiffValue > 0) {
                        volumeDiffText = `+${volumeDiffText}`;
                        diffColorClass = 'text-green-600 font-bold'; // ë‹¤ìŒ ì°¨ëŸ‰ë³´ë‹¤ ë¶€í”¼ê°€ í¬ë©´ ì´ˆë¡ìƒ‰
                    } else if (volumeDiffValue < 0) {
                        diffColorClass = 'text-red-600'; 
                    } else {
                        diffColorClass = 'text-gray-500';
                    }
                } else {
                    volumeDiffText = 'ë¹„êµ ê¸°ì¤€ ë¶€í”¼ 0';
                    diffColorClass = 'text-gray-400 italic';
                }
            }
            
            // chartDataë¥¼ dataForDisplay ìˆœì„œë¡œ ì±„ì›ë‹ˆë‹¤.
            chartData.push({
                name: car.name,
                count: car.maxBoxes,
                ratio: car.volumeRatio
            });

            // í…Œì´ë¸” í–‰ ìƒì„± (Tailwind í´ë˜ìŠ¤ ì ìš©)
            const row = tbody.insertRow();
            row.className = 'hover:bg-gray-100';
            
            // 1. ëª¨ë¸ëª…
            row.insertCell().textContent = car.name;
            row.cells[0].className = 'px-3 py-3 text-sm font-medium text-gray-900 text-left';

            // 2. í¬ê¸° (W x L x H)
            row.insertCell().textContent = car.displaySpec;
            row.cells[1].className = 'px-3 py-3 text-sm text-gray-500';

            // 3. ë¶€í”¼ (m^3)
            row.insertCell().textContent = car.carVolume.toFixed(2);
            row.cells[2].className = 'px-3 py-3 text-sm text-gray-500';

            // 4. ì ì¬ìœ¨ (%)
            row.insertCell().textContent = car.volumeRatio.toFixed(1) + '%';
            row.cells[3].className = `px-3 py-3 text-sm font-semibold ${car.volumeRatio >= 80 ? 'text-green-600' : 'text-yellow-600'}`;
            
            // 5. ë¶€í”¼ ì°¨ì´ (%)
            const diffCell = row.insertCell();
            diffCell.textContent = volumeDiffText;
            diffCell.className = `px-3 py-3 text-sm ${diffColorClass}`;

            // 6. ìµœëŒ€ ì ì¬ ë°•ìŠ¤ ìˆ˜
            row.insertCell().textContent = car.maxBoxes;
            row.cells[5].className = 'px-3 py-3 text-sm font-bold text-indigo-600';
            
            // 7. ê´€ë¦¬ (ì¸ì‡„ ì‹œ ìˆ¨ê¹€)
            const actionCell = row.insertCell();
            actionCell.className = 'px-3 py-3 text-sm print-hide';

            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'ì‚­ì œ';
            // car.originalIndexëŠ” carSpecs ë°°ì—´ ë‚´ì˜ ì¸ë±ìŠ¤ë¡œ, ì‚­ì œ ì‹œ ì •í™•í•œ ìœ„ì¹˜ë¥¼ ì°¾ë„ë¡ í•©ë‹ˆë‹¤.
            deleteButton.onclick = () => deleteCarSpec(car.originalIndex); 
            deleteButton.className = 'delete-btn bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-3 rounded-md text-xs transition-colors';
            actionCell.appendChild(deleteButton);
        });

        // ê·¸ë˜í”„ ê·¸ë¦¬ê¸° - chartDataëŠ” ì›ë³¸ ìˆœì„œ(ë¶€í”¼ í° ìˆœì„œ)ëŒ€ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
        drawBarChart(chartData);
    }
    
    // 4. ì°¨ëŸ‰ ì¶”ê°€ ê¸°ëŠ¥ (W, L, H ê°ê° ì…ë ¥ ë°›ìŒ) - ë³€ê²½ ì—†ìŒ
    function addCarSpec() {
        const nameInput = document.getElementById('new_car_name');
        const wInput = document.getElementById('new_car_w');
        const lInput = document.getElementById('new_car_l');
        const hInput = document.getElementById('new_car_h');
        
        const name = nameInput.value.trim();
        const w = parseInt(wInput.value);
        const l = parseInt(lInput.value);
        const h = parseInt(hInput.value);
        
        // ìœ íš¨ì„± ê²€ì‚¬
        if (name && !isNaN(w) && w > 0 && !isNaN(l) && l > 0 && !isNaN(h) && h > 0) {
            // W x L x H í˜•ì‹ìœ¼ë¡œ ë‹¤ì‹œ ì¡°í•©í•˜ì—¬ ì €ì¥
            const spec = `${w} x ${l} x ${h}`;
            
            carSpecs.push({ name: name, spec: spec }); // ë°°ì—´ì˜ ë§¨ ë’¤(í…Œì´ë¸”ì˜ ì•„ë˜)ì— ì¶”ê°€
            updateCarTable();
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            nameInput.value = '';
            wInput.value = '';
            lInput.value = '';
            hInput.value = '';
        } else {
            // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ ëŒ€ì‹  console.error ì‚¬ìš©
            console.error("ì°¨ëŸ‰ ëª¨ë¸ëª…ê³¼ ì œì›(ë„ˆë¹„, ê¸¸ì´, ë†’ì´)ì„ ëª¨ë‘ ìˆ«ìë¡œ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            if (!name) nameInput.focus();
            else if (isNaN(w) || w <= 0) wInput.focus();
            else if (isNaN(l) || l <= 0) lInput.focus();
            else if (isNaN(h) || h <= 0) hInput.focus();
        }
    }
    
    // 6. ì°¨ëŸ‰ ì‚­ì œ ê¸°ëŠ¥
    function deleteCarSpec(index) {
        const carName = carSpecs[index].name;
        // NOTE: window.confirm() ì‚¬ìš© ê¸ˆì§€ ì§€ì¹¨ì— ë”°ë¼ í™•ì¸ ì ˆì°¨ ì—†ì´ ì¦‰ì‹œ ì‚­ì œí•©ë‹ˆë‹¤.
        console.log(`ì°¨ëŸ‰ '${carName}'ì„(ë¥¼) í™•ì¸ ì ˆì°¨ ì—†ì´ ì‚­ì œí•©ë‹ˆë‹¤.`);
        carSpecs.splice(index, 1); // í•´ë‹¹ ì¸ë±ìŠ¤ì˜ ìš”ì†Œ ì‚­ì œ
        updateCarTable(); // í…Œì´ë¸” ë° ê·¸ë˜í”„ ìƒˆë¡œê³ ì¹¨
    }

    // 7. ìº”ë²„ìŠ¤ ë§‰ëŒ€ ê·¸ë˜í”„ ê·¸ë¦¬ê¸° - ë³€ê²½ ì—†ìŒ
    function drawBarChart(data) {
        const canvas = document.getElementById('chartCanvas');
        const ctx = canvas.getContext('2d');
        const W = canvas.width;
        const H = canvas.height;
        ctx.clearRect(0, 0, W, H); // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”

        const padding = 60;
        const chartW = W - 2 * padding;
        const chartH = H - 2 * padding;
        const barMargin = 20;

        const maxCount = data.length > 0 ? Math.max(...data.map(d => d.count)) : 0;
        const maxValue = Math.ceil(maxCount / 10) * 10; // Yì¶• ìµœëŒ€ê°’ì„ 10ì˜ ë°°ìˆ˜ë¡œ ë°˜ì˜¬ë¦¼
        
        // ë°ì´í„° ì—†ìŒ ì²˜ë¦¬
        if (data.length === 0 || maxCount === 0) {
             ctx.font = '20px "Inter", sans-serif';
             ctx.fillStyle = '#666';
             ctx.textAlign = 'center';
             ctx.fillText('ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ì ì¬ëŸ‰ì´ 0ì…ë‹ˆë‹¤.', W / 2, H / 2);
             return;
        }

        const barW = (chartW / data.length) * 0.6; // ë§‰ëŒ€ ë„ˆë¹„
        const barSpacing = chartW / data.length;
        const barXStart = padding + (barSpacing - barW) / 2;

        // ì¶• ê·¸ë¦¬ê¸°
        ctx.strokeStyle = '#333';
        ctx.lineWidth = 1;

        // Yì¶• (ì„¸ë¡œì¶•)
        ctx.beginPath();
        ctx.moveTo(padding, padding);
        ctx.lineTo(padding, H - padding);
        ctx.stroke();

        // Xì¶• (ê°€ë¡œì¶•)
        ctx.beginPath();
        ctx.moveTo(padding, H - padding);
        ctx.lineTo(W - padding, H - padding);
        ctx.stroke();
        
        // Yì¶• ëˆˆê¸ˆ ë° ë ˆì´ë¸” (4ê°œ ëˆˆê¸ˆ)
        ctx.fillStyle = '#555';
        ctx.font = '12px "Inter", sans-serif';
        for (let i = 0; i <= 4; i++) {
            const yValue = (maxValue / 4) * i;
            const y = H - padding - (yValue / maxValue) * chartH;
            
            // ê°€ë¡œì„  (ê·¸ë¦¬ë“œ)
            if (i > 0) { // 0ì  ì œì™¸
                ctx.beginPath();
                ctx.strokeStyle = '#e0e0e0';
                ctx.lineWidth = 1;
                ctx.moveTo(padding, y);
                ctx.lineTo(W - padding, y);
                ctx.stroke();
            }

            // ëˆˆê¸ˆ í…ìŠ¤íŠ¸
            ctx.fillStyle = '#555';
            ctx.textAlign = 'right';
            ctx.fillText(Math.round(yValue), padding - 10, y + 4);
        }
        ctx.textAlign = 'center';
        ctx.font = '14px "Inter", sans-serif';
        ctx.fillText('ìµœëŒ€ ì ì¬ ë°•ìŠ¤ ìˆ˜', padding, padding - 30); // Yì¶• ì œëª©

        // ë§‰ëŒ€ ê·¸ë¦¬ê¸°
        data.forEach((d, i) => {
            const barH = (d.count / maxValue) * chartH;
            const x = padding + i * barSpacing + (barSpacing - barW) / 2;
            const y = H - padding - barH;
            
            // ë§‰ëŒ€ ìƒ‰ìƒ: ìƒìœ„ 2ê°œëŠ” ì¸ë””ê³  ê³„ì—´, ë‚˜ë¨¸ì§€ëŠ” ì²­ìƒ‰ ê³„ì—´ (ì›ë³¸ ìˆœì„œëŒ€ë¡œ í‘œì‹œë¨)
            const color = (i < 2) ? '#4f46e5' : '#3b82f6'; 

            // ë§‰ëŒ€
            ctx.fillStyle = color;
            ctx.shadowColor = 'rgba(0, 0, 0, 0.1)';
            ctx.shadowBlur = 4;
            ctx.fillRect(x, y, barW, barH);
            ctx.shadowBlur = 0; // ê·¸ë¦¼ì ì´ˆê¸°í™”
            
            // ê°’ ë ˆì´ë¸” (ë§‰ëŒ€ ìƒë‹¨)
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px "Inter", sans-serif';
            ctx.fillText(d.count, x + barW / 2, y - 8);
            
            // Xì¶• ë ˆì´ë¸” (ì°¨ëŸ‰ ì´ë¦„)
            ctx.fillStyle = '#333';
            ctx.font = '12px "Inter", sans-serif';
            // ì´ë¦„ì´ ë„ˆë¬´ ê¸¸ ê²½ìš° ì¤„ ë°”ê¿ˆ ë˜ëŠ” íšŒì „ ì²˜ë¦¬ (ì—¬ê¸°ì„œëŠ” ê°„ë‹¨íˆ í‘œì‹œ)
            ctx.fillText(d.name, x + barW / 2, H - padding + 20);
        });
    }

    // ì´ˆê¸° ì‹¤í–‰
    function calculateCapacity() {
        updateCarTable();
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë°ì´í„°ë¡œ í•œë²ˆ ì‹¤í–‰
    window.onload = calculateCapacity;
</script>

</body>
</html>
